using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace ConsoleReader
{
    class Program
    {
        static void Main(string[] args)
        {
            List<string> GameList = new List<string>();
            string data;
            try
            {
                WebRequest request = WebRequest.Create("http://api.steampowered.com/ISteamApps/GetAppList/v2");

                using (var response = request.GetResponse())
                {
                    using (var stream = response.GetResponseStream())
                    {
                        using (var reader = new StreamReader(stream))
                        {
                            data = reader.ReadToEnd();
                            byte[] array = System.Text.Encoding.UTF8.GetBytes(data);
                            array.ToString();
                        }
                    }
                }

                string str = String.Empty;


                for (int i = 0; i < data.Length; i++)
                {
                    if (data[i] == ':' && data[i + 1] == '"')
                    {
                        i++;
                        i++;
                        do
                        {
                            str += data[i];
                            i++;

                        } while (data[i] != '"');
                        GameList.Add(str);
                        str = String.Empty;
                    }
                }


                Regex regex = new Regex("^name\":\"\"$");
                


            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            Console.WriteLine(GameList.Count.ToString());
           


              //GameList.ForEach(x => Console.WriteLine(x.ToString()));
            Console.Read();
        }
    }
}
